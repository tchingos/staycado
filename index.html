<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staycado - Share Your Holiday Home</title>
    <link rel="icon" type="image/png" href="assets/images/staycado-favicon-coral.png">
    <link rel="shortcut icon" type="image/png" href="assets/images/staycado-favicon-coral.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Centralized Firebase Configuration -->
    <script src="firebase-config.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #333;
            background: white;
            scroll-behavior: smooth;
        }
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #667eea;
            text-decoration: none;
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
            justify-content: center;
            flex: 1;
        }
        
        .nav-link {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }
        
        .nav-link:hover {
            color: #667eea;
        }
        
        .auth-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s ease;
            font-size: 14px;
        }
        
        .nav-btn:hover {
            transform: translateY(-2px);
        }
        
        /* Hero Section */
        .hero {
            padding: 120px 2rem 80px;
            text-align: center;
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
        }
        
        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #333;
        }
        
        .hero p {
            font-size: 1.3rem;
            margin-bottom: 3rem;
            opacity: 0.8;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            color: #666;
        }
        
        /* Features Section */
        .features-section {
            max-width: 1000px;
            margin: -40px auto 0;
            padding: 3rem 2rem;
            background: white;
            border-radius: 20px;
            position: relative;
            z-index: 10;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .feature {
            text-align: center;
            padding: 2rem 1rem;
            border-radius: 15px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transition: transform 0.3s ease;
        }
        
        .feature:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .feature h3 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        
        /* About Section */
        .about-section {
            padding: 80px 2rem;
            background: #f8f9ff;
        }
        
        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .about-section h2 {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 3rem;
            color: #333;
        }
        
        .story {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
        }
        
        .story p {
            margin-bottom: 1.5rem;
        }
        
        .highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            font-style: italic;
            font-weight: 500;
            text-align: center;
            font-size: 1.2rem;
        }
        
        /* Request Invite Section */
        .invite-section {
            padding: 80px 2rem;
            background: white;
        }
        
        .invite-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .invite-section h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: #333;
        }
        
        .description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 3rem;
        }
        
        .description p {
            margin-bottom: 1.5rem;
        }
        
        .email-form {
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
            padding: 3rem;
            border-radius: 20px;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .form-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #333;
        }
        
        .form-subtitle {
            margin-bottom: 2rem;
            color: #666;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.2s ease;
            font-family: inherit;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.4);
        }
        
        .success-message {
            color: #667eea;
            font-weight: 600;
            font-size: 1.1rem;
            margin-top: 1rem;
            display: none;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            top: 80px;
            right: 20px;
            background: #ff6b9d;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.3);
            z-index: 10002;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            font-weight: 500;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.error {
            background: #e74c3c;
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.3);
        }
        
        /* Navigation Circle */
        .nav-circle {
            position: fixed;
            top: 10px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e8d5ff, #d1a7f0);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10001;
            box-shadow: 0 4px 20px rgba(232, 213, 255, 0.4);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .nav-circle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(232, 213, 255, 0.5);
        }
        
        .nav-circle-icon {
            color: white;
            font-size: 20px;
            font-weight: 500;
        }
        
        /* Navigation Dropdown */
        .nav-dropdown {
            position: fixed;
            top: 70px;
            right: 20px;
            background: #f5f5f5;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            padding: 8px 0;
            min-width: 180px;
            z-index: 10000;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.2s ease, transform 0.2s ease;
            pointer-events: none;
        }
        
        .nav-dropdown.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        
        .nav-dropdown-item {
            display: block;
            padding: 12px 20px;
            color: #333;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: background-color 0.2s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
        }
        
        .nav-dropdown-item:hover {
            background-color: #e0e0e0;
        }
        
        .nav-dropdown-divider {
            height: 1px;
            background-color: #ddd;
            margin: 4px 0;
        }
        
        /* Footer */
        .footer {
            background: #333;
            color: white;
            text-align: center;
            padding: 2rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                padding: 1rem;
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .nav-links {
                gap: 1rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
            
            .about-section h2,
            .invite-section h2 {
                font-size: 2rem;
            }
            
            .features-section,
            .email-form {
                margin: 1rem;
                padding: 2rem 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a href="#home" class="logo">Staycado</a>
        <nav class="nav-links">
            <a href="#about" class="nav-link">About</a>
            <a href="#invite" class="nav-link">Get Started</a>
        </nav>
    </header>
    
    <!-- Navigation Circle -->
    <div class="nav-circle" id="navCircle">
        <div class="nav-circle-icon" id="navCircleIcon">üë§</div>
    </div>
    
    <!-- Navigation Dropdown -->
    <div class="nav-dropdown" id="navDropdown">
        <div id="loggedOutMenu" class="hidden">
            <button class="nav-dropdown-item" id="signInMenuItem">Sign In with Google</button>
        </div>
        <div id="loggedInMenu" class="hidden">
            <button class="nav-dropdown-item" id="dashboardMenuItem">Dashboard</button>
            <button class="nav-dropdown-item" id="profileMenuItem">Profile</button>
            <div class="nav-dropdown-divider"></div>
            <button class="nav-dropdown-item" id="signOutMenuItem">Sign Out</button>
        </div>
    </div>
    
    <!-- Hero Section -->
    <section id="home" class="hero">
        <h1>Share Your Holiday Home</h1>
        <p>The private way to share your holiday home with those you love</p>
    </section>
    
    <!-- Features Section -->
    <div class="features-section">
        <div class="features">
            <div class="feature">
                <div class="feature-icon">üìù</div>
                <h3>List Your Home</h3>
                <p>Add your property details and photos</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üë•</div>
                <h3>Invite Friends</h3>
                <p>Share with your trusted circle</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üìÖ</div>
                <h3>Easy Booking</h3>
                <p>Simple date requests and approvals</p>
            </div>
        </div>
    </div>
    
    <!-- About Section -->
    <section id="about" class="about-section">
        <div class="about-content">
            <h2>About Staycado</h2>
            <div class="story">
                <p>Hi, I'm Tim. Like many people, I'm lucky enough to own a holiday house ‚Äì a place where my family and I create wonderful memories. But here's the thing: for most of the year, it sits empty.</p>
                
                <p>I used to give friends and family open invites all the time. "Feel free to use the place whenever you want!" I'd say. But you know what? Almost no one ever took me up on it. I think people felt awkward about asking, or they weren't sure if we'd be using it that weekend, or they simply forgot about the offer altogether.</p>
                
                <p>That's when I realized there had to be a better way. I wanted something that would remove all the awkwardness around asking "Are you using your place that weekend?" I wanted to make it crystal clear when the house was available and give people an easy way to see what it offered.</p>
                
                <div class="highlight">
                    "Holiday homes shouldn't sit empty ‚Äì they should be filled with the people we love, even when we're not there to be with them."
                </div>
                
                <p>So I built Staycado with some AI assistance and a lot of ingenuity. It's designed to solve the exact problem I was facing: making it easier and more concrete for people to share their holiday homes with friends and family.</p>
                
                <p>The idea is simple: create a beautiful page for your property with photos and details, share it privately with your circle, and let them see exactly when it's available. No more awkward conversations, no more empty houses, and no more missed opportunities to share amazing experiences.</p>
                
                <p>I hope Staycado helps other holiday home owners share their special places more easily, because the best memories are the ones we make with the people we care about ‚Äì whether we're there with them or not.</p>
            </div>
        </div>
    </section>
    
    <!-- Request Invite Section -->
    <section id="invite" class="invite-section">
        <div class="invite-content">
            <h2>Join Staycado</h2>
            
            <div class="description">
                <p>Staycado makes sharing your holiday home with friends and family simple and stress-free. If you own a vacation property, cabin, beach house, or any other getaway space, Staycado helps you share it with the people you care about most.</p>
                
                <p>Here's how it works: Create a beautiful property page with photos, amenities, and all the details your guests need to know. Share this page privately with your friends and family so they can see what you have to offer. Your guests can view an integrated calendar to see when your property is available, then reach out to you directly to arrange their stay.</p>
                
                <p>Staycado keeps everything organized and transparent, but the actual booking and communication happens between you and your guests - just the way it should be. No fees, no complicated booking systems, just a simple way to share your special place with the people you love.</p>
            </div>
            
            <div class="email-form">
                <h3 class="form-title">Request Your Invite</h3>
                <p class="form-subtitle">Enter your email to get early access to Staycado</p>
                
                <form id="inviteForm">
                    <div class="form-group">
                        <input type="email" id="emailInput" class="form-input" placeholder="Enter your email address" required>
                    </div>
                    <button type="submit" class="submit-btn">Request Invite</button>
                </form>
                
                <div id="thankYouMessage" class="success-message">
                    Thank you! We'll send you an invite soon.
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 Staycado. Built with ‚ù§Ô∏è for holiday home owners.</p>
    </footer>
    
    <script>
        // BASIC TEST - this should ALWAYS show up
        console.log('MAIN SITE SCRIPT IS RUNNING');
        console.log('Current URL:', window.location.href);
        
        // Check for sign out parameter IMMEDIATELY - before anything else
        const urlParams = new URLSearchParams(window.location.search);
        console.log('URL params:', urlParams.toString());
        const shouldSignOut = urlParams.get('signout') === 'true';
        console.log('shouldSignOut:', shouldSignOut);
        
        if (shouldSignOut) {
            console.log('SIGNOUT PARAMETER DETECTED!');
            // Clean up URL immediately
            window.history.replaceState({}, document.title, window.location.pathname);
        }
        
        // Wait for page load
        window.addEventListener('load', async function() {
            console.log('Page load event fired');
            
            // Initialize Firebase using centralized config
            await window.initializeFirebase();
            
            // If we detected signout, handle it after Firebase is ready
            if (shouldSignOut) {
                console.log('Firebase ready, processing sign out...');
                try {
                    if (window.auth.currentUser) {
                        await window.signOut(window.auth);
                        console.log('User signed out successfully from main site');
                    } else {
                        console.log('No Firebase user to sign out');
                    }
                    // IMPORTANT: Force logged out state regardless of Firebase auth status
                    console.log('Forcing navigation to logged out state');
                    updateNavigation(null);
                } catch (error) {
                    console.error('Error signing out on main site:', error);
                    // Still force logged out state even if there was an error
                    updateNavigation(null);
                }
            }
            
            // Navigation elements
            const navCircle = document.getElementById('navCircle');
            const navDropdown = document.getElementById('navDropdown');
            const navCircleIcon = document.getElementById('navCircleIcon');
            const loggedOutMenu = document.getElementById('loggedOutMenu');
            const loggedInMenu = document.getElementById('loggedInMenu');
            
            // Menu items
            const signInMenuItem = document.getElementById('signInMenuItem');
            const dashboardMenuItem = document.getElementById('dashboardMenuItem');
            const profileMenuItem = document.getElementById('profileMenuItem');
            const signOutMenuItem = document.getElementById('signOutMenuItem');
            
            let currentUser = null;
            let dropdownOpen = false;
            
            // Navigation circle click handler
            navCircle.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleDropdown();
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!navDropdown.contains(e.target) && !navCircle.contains(e.target)) {
                    closeDropdown();
                }
            });
            
            function toggleDropdown() {
                if (dropdownOpen) {
                    closeDropdown();
                } else {
                    openDropdown();
                }
            }
            
            function openDropdown() {
                navDropdown.classList.add('show');
                dropdownOpen = true;
            }
            
            function closeDropdown() {
                navDropdown.classList.remove('show');
                dropdownOpen = false;
            }
            
            function updateNavigation(user) {
                if (user) {
                    // User is signed in - FORCE hide logged out menu
                    navCircleIcon.textContent = user.email ? user.email.charAt(0).toUpperCase() : 'üë§';
                    loggedOutMenu.style.display = 'none';
                    loggedOutMenu.classList.add('hidden');
                    loggedInMenu.style.display = 'block';
                    loggedInMenu.classList.remove('hidden');
                } else {
                    // User is signed out - FORCE hide logged in menu
                    navCircleIcon.textContent = 'üë§';
                    loggedInMenu.style.display = 'none';
                    loggedInMenu.classList.add('hidden');
                    loggedOutMenu.style.display = 'block';
                    loggedOutMenu.classList.remove('hidden');
                }
            }
            
            // Initialize with logged out state
            updateNavigation(null);
            
            // Listen for authentication state changes
            window.onAuthStateChanged(window.auth, (user) => {
                currentUser = user;
                updateNavigation(user);
            });
            
            // Menu item click handlers
            signInMenuItem.addEventListener('click', async () => {
                closeDropdown();
                try {
                    const result = await window.signInWithPopup(window.auth, window.googleProvider);
                    const user = result.user;
                    console.log('User signed in successfully:', user.email);
                    // Get token and redirect to dashboard
                    user.getIdToken().then((token) => {
                        window.location.href = `https://my.staycado.com?token=${token}`;
                    });
                } catch (error) {
                    console.error('Error signing in:', error);
                    showToast('Error signing in. Please try again.', 'error');
                }
            });
            
            dashboardMenuItem.addEventListener('click', async () => {
                closeDropdown();
                if (currentUser) {
                    currentUser.getIdToken().then((token) => {
                        window.location.href = `https://my.staycado.com?token=${token}`;
                    });
                }
            });
            
            profileMenuItem.addEventListener('click', async () => {
                closeDropdown();
                if (currentUser) {
                    currentUser.getIdToken().then((token) => {
                        window.location.href = `https://my.staycado.com/profile.html?token=${token}`;
                    });
                }
            });
            
            signOutMenuItem.addEventListener('click', async () => {
                closeDropdown();
                try {
                    await window.signOut(window.auth);
                    console.log('User signed out successfully');
                } catch (error) {
                    console.error('Error signing out:', error);
                }
            });
            
            // Handle email form submission
            document.getElementById('inviteForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const emailInput = document.getElementById('emailInput');
                const thankYouMessage = document.getElementById('thankYouMessage');
                
                if (emailInput.value) {
                    emailInput.style.display = 'none';
                    document.querySelector('.submit-btn').style.display = 'none';
                    thankYouMessage.style.display = 'block';
                }
            });
            
            // Toast notification function
            function showToast(message, type = 'default') {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 100);
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => document.body.removeChild(toast), 300);
                }, 3000);
            }
        });
    </script>
</body>
</html>